// prisma/schema.prisma

generator client {
  provider = "prisma-client"
  output   = "../src/infrastructure/database/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model Vehicle {
  id           Int               @id @default(autoincrement())
  vin          String            @unique
  make         String
  model        String
  year         Int
  trim         String?
  fuelType     FuelType?
  transmission TransmissionType?
  engine       String?
  color        String?
  mileage      Int?
  licensePlate String?
  state        String?
  ownerId      String?
  status       VehicleStatus     @default(Active)
  isDeleted    Boolean           @default(false)

  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt

  services VehicleServiceHistory[]
}

model VehicleServiceHistory {
  id               Int                @id @default(autoincrement())
  serviceType      VehicleServiceType
  serviceDate      DateTime
  mileageAtService Int
  technicianName   String
  notes            String?

  vehicleId Int
  vehicle   Vehicle @relation(fields: [vehicleId], references: [id], onDelete: Cascade)

  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt
}

// Enums-------------------------------------------------------------------------
enum FuelType {
  Gasoline
  Diesel
  Electric
  Hybrid
  PlugInHybrid
  Hydrogen
  Other
}

enum TransmissionType {
  Automatic
  Manual
  CVT
  DualClutch
  Robotic
  Other
}

enum VehicleServiceType {
  OilChange
  TireRotation
  BrakeService
  EngineDiagnostic
  TransmissionFlush
  BatteryReplacement
  AirFilterReplacement
  SuspensionService
  Alignment
  RecallService
  GeneralMaintenance
  Other
}

enum VehicleStatus {
  Active
  InRepair
  ReadyForPickup
  Archived
  UnderWarranty
  InService
  OnLoan
  NotOperational
}
